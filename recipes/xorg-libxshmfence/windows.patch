--- src/xshmfence_alloc.c
+++ src/xshmfence_alloc.c
@@ -124,13 +124,7 @@ xshmfence_alloc_shm(void)
 struct xshmfence *
 xshmfence_map_shm(int fd)
 {
-	struct xshmfence *addr;
-	addr = mmap (NULL, sizeof (struct xshmfence) , PROT_READ|PROT_WRITE, MAP_SHARED, fd, 0);
-	if (addr == MAP_FAILED) {
-		close (fd);
-		return 0;
-	}
-	return addr;
+	return 0;
 }
 
 /**
@@ -141,5 +135,5 @@ xshmfence_map_shm(int fd)
 void
 xshmfence_unmap_shm(struct xshmfence *f)
 {
-        munmap(f, sizeof (struct xshmfence));
+        return;
 }
--- src/xshmfenceint.h
+++ src/xshmfenceint.h
@@ -25,7 +25,6 @@
 
 #include <stdlib.h>
 #include <unistd.h>
-#include <sys/mman.h>
 #include "xshmfence.h"
 
 #if HAVE_FUTEX
