{% set name = "mariadb-server" %}
{% set version_server = "10.11.4" %}
{% set version_connector = "3.3.5" %}

package:
  name: {{ name|lower }}
  version: {{ version_server }}

source:
  - folder: server
    url: https://github.com/MariaDB/server/archive/mariadb-{{ version_server }}.tar.gz
    sha256: 87f5409d7cc7da8ef8dfc8ea4fc2cc007dbc9d59b89e880f23ea588d682af64d

  - folder: connector
    url: https://github.com/mariadb-corporation/mariadb-connector-c/archive/v{{ version_connector }}.tar.gz
    sha256: c0fda1fa6e52dc85de27156cd847088a72d40d9de6514f7efa57c8d93134a54c 

build:
  number: 0

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - cmake
    - make  # [not win]
    - ninja  # [win]
    - git
  host:
    - zstd  # [osx]
    - krb5  # [osx]
    - bison  # [not win]
    - m2-bison  # [win]
    - ncurses  # [not win]
    - zlib
    - libevent  # [not win]
    - openssl
    - gnutls  # [not win]
    - libxml2
    - boost
    - libaio  # [linux]
    - libsystemd0  # [linux]
    - snappy
    - lzo
    - libcurl

test:
  commands:
    - mariadb --version

about:
  home: https://github.com/MariaDB/server
  summary: |
    MariaDB server is a community developed fork of MySQL server.
  license: LGPL-2.1-only
  license_file: COPYING

extra:
  recipe-maintainers:
    - avgra3
