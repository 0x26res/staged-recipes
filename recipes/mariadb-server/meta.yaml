{% set name = "mariadb-server" %}
{% set version = "10.9.7" %}
{% set mariadb_connector_c_version = "3.3.5" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  - folder: server-mariadb
    url: https://github.com/MariaDB/server/archive/mariadb-{{ version }}.tar.gz
    sha256: 24fb8e74e524f6e3d65b456b94e22843d73082c7003238e53b091aa9c694e092
  
  - folder: mariadb-connector-c
    url: https://github.com/mariadb-corporation/mariadb-connector-c/archive/v{{ mariadb_connector_c_version }}.tar.gz
    sha256: c0fda1fa6e52dc85de27156cd847088a72d40d9de6514f7efa57c8d93134a54c

build:
  number: 0

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - cmake
    - make  # [not win]
    - ninja  # [win]
    - jemalloc  # [not win]
    - libjemalloc  # [not win]
  host:
    - openssl
    - zstd
    - krb5  # [osx]
    - gzip  # [not win]
    - bison  # [not win]
    - winflexbison  # [win]
    - libaio  # [linux]
    - ncurses  # [not win]
    - gnutls  # [not win]
    - libxml2  # [linux]
    - boost-cpp
    - libsystemd  # [linux]
    - judy  # [not win]
    - git


test:
  commands:
    - mariadb --version

about:
  home: https://github.com/MariaDB/server
  summary:  MariaDB server is a community developed fork of MySQL server. Started by core members of the original MySQL team, MariaDB actively works with outside developers to deliver the most featureful, stable, and sanely licensed open SQL server in the industry.
  license: LGPL-2.1-or-later
  license_family: LGPL
  license_file: COPYING
  dev_url: https://github.com/MariaDB/server

extra:
  recipe-maintainers:
    - avgra3
