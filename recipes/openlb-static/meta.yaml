{% set name = "openlb-static" %}
{% set version = "1.7r0" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://zenodo.org/records/10684609/files/olb-{{ version }}.tgz
  sha256: a71a3d458680598340e391e108ffa8cfbdc8c8e5900b1f72a6191c878fbff06c
  patches:
    - openlb-makefile.patch

build:
  skip: True  # [win]
  number: 0
  run_exports:
    - {{ pin_subpackage(name, max_pin='x') }}

requirements:
  build:
    - make
    - {{ stdlib('c') }}
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
  host:
    - libgomp  # [linux]
    - llvm-openmp  # [osx]
    - zlib
    - tinyxml
  run:

test:
  commands:
    - test -f ${PREFIX}/lib/libolbcore.a  # [unix]

about:
  home: https://www.openlb.net/
  license: GPL-2.0-only
  license_family: GPL
  license_file: LICENSE
  summary: An implementation of lattice Boltzmann methods that is general enough to address 
    a vast range of transport problems, e.g. in computational fluid dynamics
  doc_url: https://www.openlb.net/user-guide/

extra:
  recipe-maintainers:
    - martin-g
