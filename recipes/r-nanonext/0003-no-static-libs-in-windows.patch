From 8cbc9cde4d2260fb34bbcb61a838d31f61b6a0ca Mon Sep 17 00:00:00 2001
From: brendanf <brendan.furneaux@gmail.com>
Date: Thu, 8 Feb 2024 14:56:52 +0200
Subject: [PATCH 3/3] no static libs in windows

---
 src/Makevars.ucrt |  4 ++--
 src/Makevars.win  | 17 ++---------------
 2 files changed, 4 insertions(+), 17 deletions(-)

diff --git a/src/Makevars.ucrt b/src/Makevars.ucrt
index 11b714f8..4fd01ea3 100644
--- a/src/Makevars.ucrt
+++ b/src/Makevars.ucrt
@@ -1,2 +1,2 @@
-PKG_CFLAGS=-I../install/include -DNNG_STATIC_LIB $(C_VISIBILITY)
-PKG_LIBS=-L../install/lib -lnng -lmbedtls -lmbedx509 -lmbedcrypto -lbcrypt -lws2_32
+PKG_CFLAGS=$(C_VISIBILITY)
+PKG_LIBS=-lnng -lmbedtls -lmbedx509 -lmbedcrypto -lbcrypt -lws2_32
diff --git a/src/Makevars.win b/src/Makevars.win
index 29130285..4fd01ea3 100644
--- a/src/Makevars.win
+++ b/src/Makevars.win
@@ -1,15 +1,2 @@
-ifeq "$(WIN)" "64"
-    ARC="x64"
-else
-    ARC="i386"
-endif
-
-PKG_CFLAGS=-I../src-${ARC}/rwinlib-1.7.0_3.5.1/include -DNNG_STATIC_LIB $(C_VISIBILITY)
-PKG_LIBS=-L../src-${ARC}/rwinlib-1.7.0_3.5.1/lib${R_ARCH} -lnng -lmbedtls -lmbedx509 -lmbedcrypto -lbcrypt -lws2_32
-
-all: winlibs
-
-winlibs:
-	curl -sL https://github.com/shikokuchuo/rwinlib/archive/refs/tags/v1.7.0_3.5.1.zip -o nng.zip
-	unzip -q nng.zip
-	rm -f nng.zip
+PKG_CFLAGS=$(C_VISIBILITY)
+PKG_LIBS=-lnng -lmbedtls -lmbedx509 -lmbedcrypto -lbcrypt -lws2_32
-- 
2.31.1

