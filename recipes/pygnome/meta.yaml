{% set name = "PyGnome" %}
{% set version = "1.1.11" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/NOAA-ORR-ERD/PyGnome/archive/v{{ version }}.tar.gz
  sha256: f4263ea7e373414ea66ca0f630b705b07e0131258b2fafad03d369b0f5ef0ee6

build:
  skip: True  # [py<39 or py>311 or python_impl == 'pypy']
  number: 0
  script: cd py_gnome && {{ PYTHON }} -m pip install ./ -vv

requirements:
  build:
    - python                              # [build_platform != target_platform]
    - cross-python_{{ target_platform }}  # [build_platform != target_platform]
    - cython                              # [build_platform != target_platform]
    - numpy                               # [build_platform != target_platform]
    - netCDF4
    - scikit-build-core
    - clang 15.*             # [osx]
    - {{ compiler('c') }}    # [not osx]
    - {{ compiler('cxx') }}  # [not osx]
    - cmake
  host:
    - python
    - pip
    - numpy
    - scikit-build-core
    - blosc
    - bzip2
    - curl
    - hdf4
    - hdf5
    - libcurl
    - libnetcdf
    - libaec
    - libxml2
    - libzip
    - openssl
    - zlib
    - zstd
  run:
    - progressbar
    - scipy
    - colander
    - gsw
    - netCDF4
    - trimesh
    - geojson
    - geopandas
    - mapbox_earcut
    - pyogrio
    - pyproj
    - shapely
    - gridded
    - pynucos
    - cell_tree2d
    - py_gd >=2.2
    - adios_db

test:
  imports:
    - gnome
  requires:
    - pytest
  commands:
    - python -c "import gnome; assert gnome.__version__ == '{{ version }}'"

about:
  home: https://github.com/NOAA-ORR-ERD/PyGnome
  license: Unlicense
  license_file: LICENSE.txt
  summary: |
    PyGNOME is a python package that encapsulates the functionality of GNOME.

  description: |
    PyGNOME is a python package that encapsulates the functionality of GNOME.
    GNOME (General NOAA Operational Modeling Environment) is a modeling tool
    developed by the National Oceanic and Atmospheric Administration (NOAA),
    Office of Response and Restoration (ORR), Emergency Response Division.
    It is designed to support oil and other hazardous material spills in the
    coastal environment, and is also a full featured, flexible particle
    tracking system, that can be used for other oceanographic transport
    applications, such as fish larvae, marine debris, etc.

extra:
  recipe-maintainers:
    - ChrisBarker-NOAA
    - JamesMakela-NOAA
    - jay-hennen
