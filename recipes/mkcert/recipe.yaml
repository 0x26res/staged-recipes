context:
  name: mkcert
  version: 1.4.4

package:
  name: ${{ name|lower }}
  version: ${{ version }}

source:
  - url: https://github.com/FiloSottile/${{ name }}/archive/refs/tags/v${{ version }}.tar.gz
    sha256: 32bd5519581bf0b03f53e5b22721692b99f39ab5b161dc27532c51eafa512ca9
    target_directory: src

build:
  script:
    - cd src
    - go-licenses save . --save_path ../library_licenses
    - if: win
      then: go build -v -o %LIBRARY_BIN%\mkcert.exe
      else: go build -v -o $PREFIX/bin/mkcert
  number: 0

requirements:
  build:
    - ${{ stdlib("c") }}
    - ${{ compiler('go-nocgo') }}
    - go-licenses

tests:
  - script: mkcert --help

about:
  homepage: https://mkcert.dev
  summary: A simple zero-config tool to make locally trusted development certificates with any names you'd like.
  description: mkcert is a simple tool for making locally-trusted development certificates. It requires no configuration.
  license: BSD-3-Clause
  license_file:
    - src/LICENSE
    - library_licenses/
  repository: https://github.com/FiloSottile/mkcert
  documentation: https://mkcert.dev

extra:
  recipe-maintainers:
    - pavelzw
