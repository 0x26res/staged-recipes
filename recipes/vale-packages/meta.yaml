# this file is generated from meta.j2.yml with _update_recipe.py
{% set version = "0.2.0" %}

{% set mkdir = "mkdir -p" %}                  # [unix]
{% set copy = "cp -rv" %}                     # [unix]
{% set styles = "/share/vale/styles/" %}      # [unix]
{% set list = "find" %}                       # [unix]

{% set mkdir = "md" %}                        # [win]
{% set copy = "robocopy /s" %}                # [win]
{% set styles = "\\share\\vale\\styles\\" %}  # [win]
{% set list = "dir /s" %}                     # [win]

package:
  name: vale-packages-split
  version: {{ version }}

source:
  url: https://github.com/errata-ai/packages/archive/refs/tags/v{{ version }}.tar.gz
  sha256: f104122771979a5f0981206bd85a02754e9480e4eee55313571f99506f5a6013

build:
  noarch: generic
  number: 0

outputs:
  - name: vale-packages
    build:
      noarch: generic
      script:
        - python {{ RECIPE_DIR }}/_update_recipe.py --check
      ignore_run_exports:
        - python
        - python_abi
    requirements:
      build:
        - python >=3.10
        - jinja2
      run:
        - vale
        
        - {{ pin_subpackage("vale-package-alex", exact=True) }}
        - {{ pin_subpackage("vale-package-google", exact=True) }}
        - {{ pin_subpackage("vale-package-hugo", exact=True) }}
        - {{ pin_subpackage("vale-package-joblint", exact=True) }}
        - {{ pin_subpackage("vale-package-microsoft", exact=True) }}
        - {{ pin_subpackage("vale-package-proselint", exact=True) }}
        - {{ pin_subpackage("vale-package-readability", exact=True) }}
        - {{ pin_subpackage("vale-package-write-good", exact=True) }}
    test:
      source_files:
        - library.json
      files:
        - test_packages.py
      requires:
        - pytest
      commands:
        - python test_packages.py
  
  - name: vale-package-alex
    build:
      noarch: generic
      script:
        {% set pkg = "/pkg/alex/alex" %}   # [unix]
        {% set pkg = "\\pkg\\alex\\alex" %}  # [win]
        - {{ mkdir }} "{{ PREFIX }}{{ styles }}"
        - {{ copy }} "{{ SRC_DIR }}{{ pkg }}" "{{ PREFIX }}{{ styles }}alex" || exit 0
        - {{ list }} "{{ PREFIX }}{{ styles }}alex"
    requirements:
      run_constrained:
        - vale >=1.0.0
    test:
      commands:
        - ls -lathr "${CONDA_PREFIX}/share/vale/styles/alex"  # [unix]
        - dir "%CONDA_PREFIX%\share\vale\styles\alex"  # [win]
    about:
      home: https://github.com/errata-ai/alex
      license: MIT
      license_family: MIT
      license_file: LICENSE
      summary: |-
        Catch insensitive, inconsiderate writing.
      dev_url: https://github.com/errata-ai/packages
  
  - name: vale-package-google
    build:
      noarch: generic
      script:
        {% set pkg = "/pkg/Google/Google" %}   # [unix]
        {% set pkg = "\\pkg\\Google\\Google" %}  # [win]
        - {{ mkdir }} "{{ PREFIX }}{{ styles }}"
        - {{ copy }} "{{ SRC_DIR }}{{ pkg }}" "{{ PREFIX }}{{ styles }}Google" || exit 0
        - {{ list }} "{{ PREFIX }}{{ styles }}Google"
    requirements:
      run_constrained:
        - vale >=1.0.0
    test:
      commands:
        - ls -lathr "${CONDA_PREFIX}/share/vale/styles/Google"  # [unix]
        - dir "%CONDA_PREFIX%\share\vale\styles\Google"  # [win]
    about:
      home: https://github.com/errata-ai/Google
      license: MIT
      license_family: MIT
      license_file: LICENSE
      summary: |-
        A Vale-compatible implementation of the Google Developer Documentation Style Guide.
      dev_url: https://github.com/errata-ai/packages
  
  - name: vale-package-hugo
    build:
      noarch: generic
      script:
        {% set pkg = "/pkg/Hugo/Hugo" %}   # [unix]
        {% set pkg = "\\pkg\\Hugo\\Hugo" %}  # [win]
        - {{ mkdir }} "{{ PREFIX }}{{ styles }}"
        - {{ copy }} "{{ SRC_DIR }}{{ pkg }}" "{{ PREFIX }}{{ styles }}Hugo" || exit 0
        - {{ list }} "{{ PREFIX }}{{ styles }}Hugo"
    # no `vale_version` available in `Hugo/meta.json``
    test:
      commands:
        - ls -lathr "${CONDA_PREFIX}/share/vale/styles/Hugo"  # [unix]
        - dir "%CONDA_PREFIX%\share\vale\styles\Hugo"  # [win]
    about:
      home: https://github.com/errata-ai/Hugo
      license: MIT
      license_family: MIT
      license_file: LICENSE
      summary: |-
        Adds support for Hugo shortcodes and other non-standard markup.
      dev_url: https://github.com/errata-ai/packages
  
  - name: vale-package-joblint
    build:
      noarch: generic
      script:
        {% set pkg = "/pkg/Joblint/Joblint" %}   # [unix]
        {% set pkg = "\\pkg\\Joblint\\Joblint" %}  # [win]
        - {{ mkdir }} "{{ PREFIX }}{{ styles }}"
        - {{ copy }} "{{ SRC_DIR }}{{ pkg }}" "{{ PREFIX }}{{ styles }}Joblint" || exit 0
        - {{ list }} "{{ PREFIX }}{{ styles }}Joblint"
    requirements:
      run_constrained:
        - vale >=1.0.0
    test:
      commands:
        - ls -lathr "${CONDA_PREFIX}/share/vale/styles/Joblint"  # [unix]
        - dir "%CONDA_PREFIX%\share\vale\styles\Joblint"  # [win]
    about:
      home: https://github.com/errata-ai/Joblint
      license: MIT
      license_family: MIT
      license_file: LICENSE
      summary: |-
        Test tech job posts for issues with sexism, culture, expectations, and recruiter fails.
      dev_url: https://github.com/errata-ai/packages
  
  - name: vale-package-microsoft
    build:
      noarch: generic
      script:
        {% set pkg = "/pkg/Microsoft/Microsoft" %}   # [unix]
        {% set pkg = "\\pkg\\Microsoft\\Microsoft" %}  # [win]
        - {{ mkdir }} "{{ PREFIX }}{{ styles }}"
        - {{ copy }} "{{ SRC_DIR }}{{ pkg }}" "{{ PREFIX }}{{ styles }}Microsoft" || exit 0
        - {{ list }} "{{ PREFIX }}{{ styles }}Microsoft"
    requirements:
      run_constrained:
        - vale >=1.0.0
    test:
      commands:
        - ls -lathr "${CONDA_PREFIX}/share/vale/styles/Microsoft"  # [unix]
        - dir "%CONDA_PREFIX%\share\vale\styles\Microsoft"  # [win]
    about:
      home: https://github.com/errata-ai/Microsoft
      license: MIT
      license_family: MIT
      license_file: LICENSE
      summary: |-
        A Vale-compatible implementation of the Microsoft Writing Style Guide.
      dev_url: https://github.com/errata-ai/packages
  
  - name: vale-package-proselint
    build:
      noarch: generic
      script:
        {% set pkg = "/pkg/proselint/proselint" %}   # [unix]
        {% set pkg = "\\pkg\\proselint\\proselint" %}  # [win]
        - {{ mkdir }} "{{ PREFIX }}{{ styles }}"
        - {{ copy }} "{{ SRC_DIR }}{{ pkg }}" "{{ PREFIX }}{{ styles }}proselint" || exit 0
        - {{ list }} "{{ PREFIX }}{{ styles }}proselint"
    requirements:
      run_constrained:
        - vale >=1.0.0
    test:
      commands:
        - ls -lathr "${CONDA_PREFIX}/share/vale/styles/proselint"  # [unix]
        - dir "%CONDA_PREFIX%\share\vale\styles\proselint"  # [win]
    about:
      home: https://github.com/errata-ai/proselint
      license: MIT
      license_family: MIT
      license_file: LICENSE
      summary: |-
        proselint places the worldâ€™s greatest writers and editors by your side.
      dev_url: https://github.com/errata-ai/packages
  
  - name: vale-package-readability
    build:
      noarch: generic
      script:
        {% set pkg = "/pkg/Readability/Readability" %}   # [unix]
        {% set pkg = "\\pkg\\Readability\\Readability" %}  # [win]
        - {{ mkdir }} "{{ PREFIX }}{{ styles }}"
        - {{ copy }} "{{ SRC_DIR }}{{ pkg }}" "{{ PREFIX }}{{ styles }}Readability" || exit 0
        - {{ list }} "{{ PREFIX }}{{ styles }}Readability"
    requirements:
      run_constrained:
        - vale >=2.13.0
    test:
      commands:
        - ls -lathr "${CONDA_PREFIX}/share/vale/styles/Readability"  # [unix]
        - dir "%CONDA_PREFIX%\share\vale\styles\Readability"  # [win]
    about:
      home: https://github.com/errata-ai/Readability
      license: MIT
      license_family: MIT
      license_file: LICENSE
      summary: |-
        Vale-compatible implementations of many popular readability metrics.
      dev_url: https://github.com/errata-ai/packages
  
  - name: vale-package-write-good
    build:
      noarch: generic
      script:
        {% set pkg = "/pkg/write-good/write-good" %}   # [unix]
        {% set pkg = "\\pkg\\write-good\\write-good" %}  # [win]
        - {{ mkdir }} "{{ PREFIX }}{{ styles }}"
        - {{ copy }} "{{ SRC_DIR }}{{ pkg }}" "{{ PREFIX }}{{ styles }}write-good" || exit 0
        - {{ list }} "{{ PREFIX }}{{ styles }}write-good"
    requirements:
      run_constrained:
        - vale >=1.0.0
    test:
      commands:
        - ls -lathr "${CONDA_PREFIX}/share/vale/styles/write-good"  # [unix]
        - dir "%CONDA_PREFIX%\share\vale\styles\write-good"  # [win]
    about:
      home: https://github.com/errata-ai/write-good
      license: MIT
      license_family: MIT
      license_file: LICENSE
      summary: |-
        Naive linter for English prose for developers who can't write good.
      dev_url: https://github.com/errata-ai/packages
  

about:
  home: https://vale.sh/hub
  license: MIT
  license_family: MIT
  license_file:
    - LICENSE
  summary: A collection of pre-packaged, Vale-compatible style guides and configurations.
  description: This repository contains a library of all officially supported styles for Vale.
  dev_url: https://github.com/errata-ai/packages

extra:
  feedstock-name: vale-packages
  recipe-maintainers:
    - bollwyvl
