{% set name = "osm2pgrouting" %}
{% set version = "2.3.8" %}

package:
  name: {{ name | lower }}
  version: {{ version }}

source: 
  url: https://github.com/pgRouting/osm2pgrouting/archive/v{{ version }}.tar.gz
  sha256: e3a58bcacf0c8811e0dcf3cf3791a4a7cc5ea2a901276133eacf227b30fd8355

build:
  number: 0
  skip: true  # [not linux]
  script:
    - |
      CXXFLAGS="${CXXFLAGS} -D_LIBCPP_DISABLE_AVAILABILITY"
      cmake -H. -Bbuild
      cd build/
      make
      make install
      
requirements:
  host:
    - cmake
    - make
    - vcpkg
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - expat
    - libexpat
    - libboost
    - libboost-devel
    - libpqxx

  run:
    - cmake
    - make
    - vcpkg
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - expat
    - libexpat
    - libboost
    - libboost-devel
    - libpqxx

test:
  commands:
    - which osm2pgrouting
    - osm2pgrouting --version

about:
  home: https://github.com/pgRouting/osm2pgrouting
  summary: |
    pgRouting extends the PostGIS / PostgreSQL geospatial database to provide geospatial routing functionality.
  license: GPL-2.0-only
  license_file: LICENSE

extra:
  recipe-maintainers:
    - mediocretech
