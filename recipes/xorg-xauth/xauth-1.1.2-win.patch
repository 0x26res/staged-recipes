--- gethost.c	2022-04-20 02:04:52.000000000 +0000
+++ gethost.c	2022-04-20 02:04:52.000000000 +0000
@@ -31,6 +31,7 @@
 
 #ifdef WIN32
 #include <X11/Xwinsock.h>
+#include <netinet/in.h>
 #define EPROTOTYPE WSAEPROTOTYPE
 #endif
 #include <X11/X.h>
@@ -202,14 +203,14 @@
 	    strncpy(path, fulldpyname, sizeof(path) - 1);
 	    path[sizeof(path) - 1] = '\0';
 #endif
-	    if (0 == stat(path, &sbuf) && S_ISSOCK(sbuf.st_mode) ) {
+	    if (0 == stat(path, &sbuf)) {
 		is_path_to_socket = 1;
 	    } else {
 		char *dot = strrchr(path, '.');
 		if (dot) {
 		    *dot = '\0';
 		    /* screen = atoi(dot + 1); */
-		    if (0 == stat(path, &sbuf) && S_ISSOCK(sbuf.st_mode)) {
+		    if (0 == stat(path, &sbuf)) {
 		        is_path_to_socket = 1;
 		    }
 		}
--- parsedpy.c	2022-04-20 02:04:52.000000000 +0000
+++ parsedpy.c	2022-04-20 02:04:52.000000000 +0000
@@ -175,14 +175,14 @@
         strncpy(path, displayname, sizeof(path) - 1);
         path[sizeof(path) - 1] = '\0';
 #endif
-        if (0 == stat(path, &sbuf) && S_ISSOCK(sbuf.st_mode)) {
+        if (0 == stat(path, &sbuf)) {
             family = FamilyLocal;
         } else {
             char *dot = strrchr(path, '.');
             if (dot) {
                 *dot = '\0';
                 /* screen = atoi(dot + 1); */
-                if (0 == stat(path, &sbuf) && S_ISSOCK(sbuf.st_mode)) {
+                if (0 == stat(path, &sbuf)) {
                     family = FamilyLocal;
                 }
             }
