From 9a5ce14be44b829d088601e192f91d6d88a278cd Mon Sep 17 00:00:00 2001
From: Mark Harfouche <mark.harfouche@gmail.com>
Date: Mon, 9 Sep 2024 22:13:21 -0400
Subject: [PATCH] Provide a switch to control shared vs static lib

Default is still static as you had it.
---
 CMakeLists.txt | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index d3684b3..b903a90 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -27,11 +27,17 @@ if(NOT DEFINED VULKAN_HEADERS_INSTALL_DIR)
   set(VULKAN_HEADERS_INSTALL_DIR "" CACHE PATH "Where to get the Vulkan headers")
 endif()
 
+option(BUILD_SHARED_LIBS "Build shared libraries" OFF)
+
 # -----------------------------------------------------
 # Static library
 
 if(NOT VOLK_HEADERS_ONLY OR VOLK_INSTALL)
+  if(BUILD_SHARED_LIBS)
+  add_library(volk SHARED volk.h volk.c)
+  else()
   add_library(volk STATIC volk.h volk.c)
+  endif()
   add_library(volk::volk ALIAS volk)
   target_include_directories(volk PUBLIC
     $<BUILD_INTERFACE:${CMAKE_CURRENT_LIST_DIR}>
