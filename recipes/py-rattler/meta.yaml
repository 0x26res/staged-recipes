{% set name = "py-rattler" %}
{% set python_name = "py_rattler" %}
{% set version = "0.1.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ python_name }}-{{ version }}.tar.gz
  sha256: d670eeae8ab710e3593d1f99d617d9266201930ec9319972a46dc6b3ea0b93ba

build:
  number: 0

outputs:
  - name: py_rattler
    requirements:
      build:
        - python >=3.8                                # [build_platform != target_platform]
        - cross-python_{{ target_platform }} >=3.8    # [build_platform != target_platform]
        - {{ compiler('c') }}
        - {{ compiler('cxx') }}
        - {{ compiler('rust') }}
        - make
        - maturin
        - cargo-bundle-licenses
      host:
        - python >=3.8
        - pip
        - maturin
        - toml
      run:
        - python >=3.8
    test:
      imports:
        - rattler

  - name: py-rattler
    build:
      noarch: generic
    requirements:
      run:
        - {{ pin_subpackage('py_rattler', max_pin="x.x.x") }}
    test:
      imports:
        - rattler

about:
  home: https://github.com/mamba-org/rattler
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE
  summary: A blazing fast library to work with the conda ecosystem

  # The remaining entries in this section are optional, but recommended.
  description: |
    Rattler is a library that provides common functionality used within the conda 
    ecosystem. The goal of the library is to enable programs and other libraries to 
    easily interact with the conda ecosystem without being dependent on Python. Its 
    primary use case is as a library that you can use to provide conda related 
    workflows in your own tools.
  dev_url: https://github.com/mamba-org/rattler

extra:
  recipe-maintainers:
    - baszalmstra
