context:
  version: 2.0.0

package:
  name: trafilatura
  version: ${{ version }}

source:
- url: https://pypi.org/packages/source/t/trafilatura/trafilatura-${{ version }}.tar.gz
  sha256: ceb7094a6ecc97e72fea73c7dba36714c5c5b577b6470e4520dca893706d6247

build:
  script: ${{ PYTHON }} -m pip install .
  python:
    entry_points:
    - trafilatura  =  trafilatura.cli:main

requirements:
  host:
  - python >=3.8
  - setuptools
  - pip
  run:
  - python >=3.8
  - certifi
  - charset-normalizer >=3.4.0
  - courlan >=1.3.2
  - htmldate >=1.9.2
  - justext >=3.0.1
  - lxml >=5.3.0
  - urllib3 <3,>=1.26
  # - brotli  # extra == "all"
  # - cchardet >=2.1.7 # python_version < "3.11" and extra == "all"
  # - faust-cchardet >=2.1.19 # python_version >= "3.11" and extra == "all"
  # - htmldate [speed]>=1.9.2 # extra == "all"
  # - py3langid >=0.3.0 # extra == "all"
  # - pycurl >=7.45.3 # extra == "all"
  # - urllib3 [socks] # extra == "all"
  # - zstandard >=0.23.0 # extra == "all"

tests:
- python:
    imports:
    - trafilatura
    pip_check: true
- script:
    - trafilatura --help

about:
  summary: 'Python & Command-line tool to gather text and metadata on the Web: Crawling, scraping, extraction, output as CSV, JSON, HTML, MD, TXT, XML.'
  homepage: https://github.com/adbar/trafilatura
  description:
  license: Apache-2.0

extra:
  recipe-maintainers:
  - moritzwilksch

