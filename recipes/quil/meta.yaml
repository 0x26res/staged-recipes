{% set name = "quil" %}
{% set version = "0.10.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/rigetti/quil-rs/archive/refs/tags/quil-py/v{{ version }}.tar.gz
  sha256: 18e6b715652b7083931c54f4e571207cce080ddc8ecd8bfc5980a28de1657d93
  patches:
    - fix-syrupy-dependent-test.patch

build:
  number: 0

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('rust') }}
    - cargo-bundle-licenses
    - pip
  host:
    - maturin >=1.0.0, <2.0.0
    - python

test:
  imports:
    - quil
  source_files:
    - quil-py/test
  requires:
    - numpy
    - pytest
    - syrupy
  commands:
    - pytest quil-py/test

about:
  home: https://github.com/rigetti/quil-rs
  summary: 'Quil Parser & Program Builder'
  description: |
    The quil package provides tools for constructing, manipulating, parsing, and printing Quil programs.
  license: Apache-2.0
  license_file:
    - LICENSE
    - THIRDPARTY.yml
  doc_url: https://rigetti.github.io/quil-rs/quil.html

extra:
  recipe-maintainers:
    - MementoRC
