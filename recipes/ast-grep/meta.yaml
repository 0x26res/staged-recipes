{% set name = "ast-grep" %}
{% set version = "0.18.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/{{ name }}/{{ name }}/archive/refs/tags/{{ version }}.tar.gz
  sha256: a1021a96fe778fcce7e600727e862b1b37f51031bad9f85d5d99c7f1aef2ffda

build:
  number: 0
  skip: true # [win]

requirements:
  build:
    - {{ compiler('cxx') }}
    - {{ compiler('rust') }}
    - cargo-bundle-licenses

test:
  commands:
    - sg --version

about:
  home: https://github.com/simplejson/simplejson
  summary: 'ast-grep(sg) is a CLI tool for code structural search, lint, and rewriting.'
  description: |
    ast-grep is an AST-based tool to search code by pattern code. Think it as
    your old-friend grep but it matches AST nodes instead of text. You can
    write patterns as if you are writing ordinary code. It will match all code
    that has the same syntactical structure. You can use $ sign + upper case
    letters as wildcard, e.g. $MATCH, to match any single AST node. Think it as
    REGEX dot ., except it is not textual.
  license: MIT
  license_family: MIT
  # It is required to include a license file in the package,
  # (even if the license doesn't require it) using the license_file entry.
  # Please also note that some projects have multiple license files which all need to be added using a valid yaml list.
  # See https://docs.conda.io/projects/conda-build/en/latest/resources/define-metadata.html#license-file
  license_file:
    - THIRDPARTY.yml
    - LICENSE
  doc_url: https://ast-grep.github.io/
  dev_url: https://github.com/ast-grep/ast-grep

extra:
  recipe-maintainers:
    - asford
