{% set name = "repo-review" %}
{% set version = "0.10.4" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/scientific-python/repo-review/archive/refs/tags/v{{ version }}.tar.gz
  sha256: 2b3a0c466fb4a1014ea131c2b8ea7c519f9278eba73d6fcb361b7bdb4fd494e9

build:
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv
  number: 0
  entry_points:
    - repo-review = repo_review.__main__:main

requirements:
  host:
    - hatchling
    - hatch-vcs
    - markdown-it-py
    - pyyaml
    - python
    - pip
    - tomli  # [py<3.11]
    - typing-extensions  # [py<3.11]
  run:
    - python

test:
  imports:
    - repo-review
  requires:
    - pip
    - pytest >=7
    - sp-repo-review >=2023.12.21
    - validate-pyproject >=0.14
  commands:
    - pip check
    - pytest -vv --pyargs repo_review
    - repo-review --help

about:
  home: https://github.com/scientific-python/repo-review
  summary: 'This is a framework for building checks designed to check to see if a repository follows guidelines'
  description: |
    This is a framework for building checks designed to check to see if a repository follows
    guidelines. By itself, it does nothing - it requires at least one plugin to be installed.

    With one or more plugins, it will produce a list of results - green checkmarks mean this
    rule is followed, red xâ€™s mean the rule is not. A yellow warning sign means that the check
    was skipped because a previous required check failed. Four output formats are supported;
    rich, svg, html, and json.
  license: BSD-3-Clause
  license_file: LICENSE
  doc_url: https://repo-review.readthedocs.io/en/latest/

extra:
  recipe-maintainers:
    - MementoRC
