context:
  version: 2.9.1

package:
  name: tensorizer
  version: ${{ version }}

source:
- url: https://pypi.org/packages/source/t/tensorizer/tensorizer-${{ version }}.tar.gz
  sha256: f79ac50d0a3bc328e3ee8cdf838ba04ddb5b9fa1d72be69f6ae618533d349e8e

build:
  script: ${{ PYTHON }} -m pip install .

requirements:
  host:
  - python
  - setuptools
  - pip
  - cmake
  - ${{ stdlib('c') }}
  - ${{ compiler('c') }}
  - ${{ compiler('cxx') }}
  run:
  - python
  - pytorch >=1.9.0
  - numpy >=1.19.5
  - protobuf >=3.19.5
  - psutil >=5.9.4
  - boto3 >=1.26.0
  - redis-py >=4.5.5
  - hiredis >=2.2.0
  - libnacl-python-bindings >=2.1.0

tests:
- python:
    imports:
    - tensorizer
    pip_check: true

about:
  homepage: https://github.com/coreweave/tensorizer
  repository: https://github.com/coreweave/tensorizer
  summary: A tool for fast PyTorch module, model, and tensor serialization + deserialization.
  description: Module, Model, and Tensor Serialization/Deserialization
  license: MIT
  license_file: LICENSE

extra:
  recipe-maintainers:
    - maresb
