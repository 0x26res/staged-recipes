{% set name = "xsel" %}
{% set version = "1.2.1" %}
{% set am_version = "1.15" %} # keep synchronized with build.sh

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/kfish/xsel/archive/{{ version }}.tar.gz
  sha256: 18487761f5ca626a036d65ef2db8ad9923bf61685e06e7533676c56d7d60eb14

build:
  number: 0
  detect_binary_files_with_prefix: true

requirements:
  build:
    - m2-autoconf  # [win]
    - m2-automake{{ am_version }}  # [win]
    - m2-libtool  # [win]
    - m2w64-pkg-config  # [win]
    - make
    - pkg-config  # [not win]
    - posix  # [win]
    - {{ stdlib('c') }}             # [not win]
    - {{ compiler('c') }}           # [not win]
    - {{ compiler('m2w64_c') }}     # [win]
    - make                          # [not win]
    - autoconf                      # [not win]
    - automake                      # [not win]
    - gettext                       # [not win]
    - libtool                       # [not win]
    - xorg-libxt
  host:
    - xorg-libx11

test:
  commands:
    - 'xsel --help 2>&1 | grep -q "Usage: xsel [options]"'  # [unix]
    - 'xsel --help 2>&1 | findstr /C:"Usage: xsel [options]" >nul'  # [win]

about:
  home: https://www.vergenet.net/~conrad/software/xsel/
  license: MIT
  license_family: MIT
  license_file: COPYING
  summary: A command-line program for getting and setting the contents of the X selection
  dev_url: https://github.com/kfish/xsel

extra:
  recipe-maintainers:
    - ehfd
