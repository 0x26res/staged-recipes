{% set name = "bip-utils" %}
{% set version = "2.9.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/MementoRC/bip_utils/archive/refs/tags/conda-v{{ version }}.tar.gz
  sha256: 38d4c2b7a04271df197a96f1c36705f95f7f586e49278c32ddb66856addd48b2
  patches:
    - fix-requirements-conda.patch

build:
  script: {{ PYTHON }} -m pip install . -vv
  number: 0
  skip: true  # [py != 38]

requirements:
  host:
    - python
    - pip
#    - {{ mpi }}  # [mpi != 'nompi']
  run:
    - cbor2 =5.1.*
    - coincurve >=15.0.1,<20.0.0
    - crcmod =1.7.*
    - ecdsa =0.17.*  # [py != 38]
    - ecdsa =0.17.*  # [py == 38]
    - ed25519-blake2b
    - py-sr25519-bindings >=0.1.3,<2.0.0
    - pycryptodome =3.15.*
    - pynacl =1.5.*
    - python
 #   - {{ mpi }}  # [mpi != 'nompi']

test:
  imports:
    - bip_utils
  requires:
    - pip
    - python
    - {{ mpi }}  # [mpi != 'nompi']
  commands:
    - pip check
    - python -m unittest discover
  source_files:
    - tests

about:
  home: https://github.com/ebellocchia/bip_utils
  summary: 'BIP Utility Library'
  description: |
    This package allows generating mnemonics, seeds, private/public keys and addresses for different types of cryptocurrencies.
  license: MIT
  license_file: LICENSE

extra:
  recipe-maintainers:
    - MementoRC
