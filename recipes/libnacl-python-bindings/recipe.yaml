context:
  version: 2.1.0

package:
  name: libnacl-python-bindings
  version: ${{ version }}

source:
- url: https://pypi.io/packages/source/l/libnacl/libnacl-${{ version }}.tar.gz
  sha256: f3418da7df29e6d9b11fd7d990289d16397dc1020e4e35192e11aee826922860

build:
  noarch: python
  script: ${{ PYTHON }} -m pip install .

requirements:
  host:
  - python ${{ python_min }}.*
  - poetry-core
  - pip
  run:
  - python >=${{ python_min }},<4.0
  - libsodium

tests:
- python:
    python_version: ${{ python_min }}.*
    imports:
    - libnacl
    pip_check: true
- files:
    source:
      - tests/
  script:
    - python -m unittest discover --start-directory tests -v

about:
  homepage: https://github.com/saltstack/libnacl
  repository: https://github.com/saltstack/libnacl
  summary: Python bindings for libsodium based on ctypes
  description: |
    This library is used to gain direct access to the functions exposed by
    Daniel J. Bernstein's nacl library via libsodium.
  license: Apache-2.0
  documentation: https://libnacl.readthedocs.org

extra:
  recipe-maintainers:
    - maresb
