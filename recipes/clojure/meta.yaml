{% set name = "clojure" %}
{% set version = "1.11.2" %}
{% set build = "1446" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  - url: https://github.com/clojure/brew-install/releases/download/{{ version }}.{{ build }}/clojure-tools-{{ version }}.{{ build }}.tar.gz  # [unix]
    sha256: aa7effb0fc950df8d93cb796c655010658c05bf77c702c3a9449b7fdd792ef71  # [unix]
  - url: https://github.com/clojure/brew-install/releases/download/{{ version }}.{{ build }}/clojure-tools.zip  # [win]
    sha256: d484aeb6e6319122f942327c03cd458563ccbcdf21bef82248293768198217ac  # [win]

    folder: clojure-tools


build:
  number: 0
  script_env:
    - PKG_BUILD={{ build }}

requirements:
  run:
    - openjdk

test:
  commands:
    - clojure --help  # [unix]
    - set PSModulePath="%PREFIX%\WindowsPowerShell\Modules\ClojureTools;%PSModulePath%"  # [win]
    - %SystemRoot%\System32\WindowsPowerShell\v1.0\powershell.exe -Command "ClojureTools.clojure --help"  # [win]
    - clojure --help  # [win]

about:
  home: https://github.com/clojure/clojure
  summary: 'Clojure is a dynamic, general-purpose programming language'
  description: |
    Clojure is a dynamic, general-purpose programming language, combining
    the approachability and interactive development of a scripting language
    with an efficient and robust infrastructure for multithreaded programming.
    Clojure is a compiled language, yet remains completely dynamic â€“ every
    feature supported by Clojure is supported at runtime. Clojure provides
    easy access to the Java frameworks, with optional type hints and type inference,
    to ensure that calls to Java can avoid reflection.
  license: EPL-1.0
  license_file: epl-v10.html
  doc_url: https://clojure.org/

extra:
  recipe-maintainers:
    - MementoRC
