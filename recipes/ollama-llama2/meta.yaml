{% set name = "llama2" %}
{% set version = "0.0.0" %}

package:
  name: ollama-{{ name|lower }}
  version: {{ version }}

build:
  binary_relcation: false
  detect_binary_files_with_prefix: false
  noarch: true
  number: 0
  script: 
    - OLLAMA_MODELS=$PREFIX/lib/ollama/models ollama serve &
    - until curl --fail http://localhost:11434; do sleep 1; done;
    - ollama pull llama2:latest
    - kill %%

requirements:
  build:
    - ollama

test:
  commands:
    - test -f $PREFIX/lib/ollama/models/manifests/registry.ollama.ai/library/llama2/latest 

about:
  home: https://ollama.ai/library/llama2
  summary: The llama2 model

extra:
  recipe-maintainers:
    - sodre
