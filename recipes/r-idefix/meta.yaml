{% set name = "idefix" %}
{% set posix = "m2-" if win else "" %}
{% set native = "m2w64-" if win else "" %}

package:
  name: r-{{ name }}
  version: '{{ version }}'

source:
  url: https://cran.r-project.org/src/contrib/idefix_{{ version }}.tar.gz
  sha256: da6be80883091f0b82b41e95fb7afbda760d9fbc1c988cfa2a327e87c1cb124b

build:
  number: 0
  merge_build_host: true
  script: R CMD INSTALL --build .
  rpaths:
    - lib/R/lib/
    - lib/

requirements:
  build:
    - cross-r-base {{ r_base }}  # [build_platform != target_platform]
    - autoconf  # [unix]
    - "{{ compiler('c') }}"  # [unix]
    - "{{ compiler('m2w64_c') }}"  # [win]
    - "{{ compiler('cxx') }}"  # [unix]
    - "{{ compiler('m2w64_cxx') }}"  # [win]
    - posix  # [win]
  host:
    - r-MASS
    - r-Rcpp >=0.12.18
    - r-Rdpack
    - r-base
    - r-dfidx
    - r-dplyr
    - r-parallel
    - r-scales
    - r-stats
    - r-tmvtnorm
    - r-utils
  run:
    - r-MASS
    - r-Rcpp >=0.12.18
    - r-Rdpack
    - r-base
    - r-dfidx
    - r-dplyr
    - r-parallel
    - r-scales
    - r-stats
    - r-tmvtnorm
    - r-utils

test:
  commands:
    - $R -e "library('idefix')"  # [not win]
    - "\"%R%\" -e \"library('idefix')\""  # [win]

about:
  home: https://github.com/traets/idefix
  summary: Generates efficient designs for discrete choice experiments based on the multinomial logit model, and individually adapted designs for the mixed multinomial logit model. The generated designs can be presented on screen and choice data can be gathered using a shiny application. Traets F, Sanchez G, and Vandebroek M (2020) <doi:10.18637/jss.v096.i03>.
  license: GPL-3.0-or-later

extra:
  recipe-maintainers:
    - tobiasraabe
