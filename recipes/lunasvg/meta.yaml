{% set version = "3.0.1" %}

package:
  name: lunasvg
  version: {{ version }}

source:
  url: https://github.com/sammycage/lunasvg/archive/refs/tags/v{{ version }}.tar.gz
  sha256: 39e3f47d4e40f7992d7958123ca1993ff1a02887539af2af1c638da2855a603c

build:
  number: 0
  run_exports:
    # Just a guess
    - {{ pin_subpackage('lunasvg', max_pin='x.x') }}

requirements:
  build:
    - {{ compiler('cxx') }}
    - {{ compiler('c') }}
    - {{ stdlib('c') }}
    - meson
    - ninja
  host:
    - plutovg
  run:

test:
  commands:
    - test -f ${PREFIX}/include/lunasvg/lunasvg.h                    # [unix]
    - test -f ${PREFIX}/lib/liblunasvg${SHLIB_EXT}                   # [unix]
    - test -f ${PREFIX}/lib/pkgconfig/lunasvg.pc                     # [unix]
    - if not exist %PREFIX%\include\lunasvg\lunasvg.h exit 1         # [win]
    - if not exist %PREFIX%\Library\lib\liblunasvg.lib exit 1        # [win]
    - if not exist %PREFIX%\Library\lib\pkgconfig\lunasvg.pc exit 1  # [win]
    - if not exist %PREFIX%\Library\bin\lunasvg.dll exit 1           # [win]

about:
  home: https://github.com/sammycage/lunasvg
  summary: 'LunaSVG is an SVG rendering library in C++, designed to be lightweight and portable, offering efficient rendering and manipulation of Scalable Vector Graphics (SVG) files.'
  description: |

    LunaSVG supports nearly all graphical features outlined in the SVG 1.1 and
    SVG 1.2 Tiny specifications. The primary exceptions are animation, filters,
    and scripts. As LunaSVG is designed for static rendering, animation is unlikely
    to be supported in the future. However, support for filters may be added.
  license: MIT
  license_family: MIT
  license_file: LICENSE

extra:
  recipe-maintainers:
    - hmaarrfk
