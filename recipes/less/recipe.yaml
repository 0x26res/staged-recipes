context:
  name: less
  version: 668
  build_num: 0

package:
  name: ${{ name }}
  version: ${{ version }}

source:
  url: https://ftp.gnu.org/gnu/${{ name }}/${{ name }}-${{ version }}.tar.gz
  sha256: 2819f55564d86d542abbecafd82ff61e819a3eec967faa36cd3e68f1596a44b8

build:
  number: ${{ build_num }}

requirements:
  build:
    - ${{ compiler('c') }}
    - ${{ compiler('cxx') }}
    - ${{ stdlib('c') }}
    - ${{ "make" if not win }}
    # - ${{ "ncurses" if not win }}
  host:
    - pcre2
    - ${{ "ncurses" if not win }}

tests:
  - script:
      - if: win
        then:
          - where less | findstr /C:"%PREFIX%\bin"
          - where lessecho | findstr /C:"%PREFIX%\bin"
          - where lesskey | findstr /C:"%PREFIX%\bin"
      - if: unix
        then:
          - test "$(which less | dirname)" = ${PREFIX}/bin
          - test "$(which lessecho | dirname)" = ${PREFIX}/bin
          - test "$(which lessecho | dirname)" = ${PREFIX}/bin
          - test "$(which lesskey | dirname)" = ${PREFIX}/bin
      - less --version
      - lessecho --version
      - lesskey --version

about:
  summary: A terminal based program for viewing text files
  description: |
    Less is a pager. A pager is a program that displays text files. Other pagers
    commonly in use are more and pg. Pagers are often used in command-line
    environments like the Unix shell and the MS-DOS command prompt to display
    files.
  license: GPL-3.0-only
  license_file:
    - LICENSE
    - COPYING
  homepage: https://www.greenwoodsoftware.com/less
  repository: https://github.com/gwsw/less
  documentation: https://www.greenwoodsoftware.com/less/faq.html

extra:
  recipe-maintainers:
    - tetov

