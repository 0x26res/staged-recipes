{% set name = "minio-server" %}
{% set version = "2023-08-23T10-07-06Z" %}
{% set platform = "windows-amd64" %}  # [win]
{% set platform = "darwin-amd64" %}  # [osx]
{% set platform = "darwin-arm64" %}  # [arm64]
{% set platform = "linux-amd64" %}  # [linux64]
{% set platform = "linux-ppc64le" %}  # [ppc64le]
{% set platform = "linux-arm64" %}  # [aarch64]

package:
  name: {{ name|lower }}
  version: {{ version|replace("-", ".")|replace("T", ".")|replace("Z", "") }}

source:
  url: https://dl.min.io/server/minio/release/{{ platform }}/archive/minio.RELEASE.{{ version }}
  sha256: aa56173c36561cd12adda4aed31b0ffe66c721743b09cf224816bb2b497cbe15  # [win]
  sha256: ad89bac01b82eac29bb512cf8f1aa0e0d56fb35696eb0324f82c4a9094520cd2  # [osx]
  sha256: 69c2dd37f4d707d86234aaedc6d114801c525fd135dc9dc23b45be9ad30799ad  # [arm64]
  sha256: 4741cb61cbcd5fa2c1d63f3e7c511e6e8ba4a93e448fb9a4c29e754ed2923dff  # [linux64]
  sha256: 9184ed104cdb41388e51ef055b47a5c3200274c5f92eff73f38c9a2ec9402524  # [aarch64]
  sha256: b44862c4dc76b2426f47aa405cd631acf88cc580c2a9771807f11d85e1e1e548  # [ppc64le]

build:
  number: 0
  script:
    # on Windows move binary to $PREFIX
    - move minio.RELEASE.{{ version }} {{ PREFIX }}/minio.exe  # [win]
    # on Unix move binary to $PREFIX/bin
    - mkdir {{ PREFIX }}/bin  # [unix]
    - mv minio.RELEASE.{{ version }} {{ PREFIX }}/bin/minio  # [unix]
    - chmod +x {{ PREFIX }}/bin/minio  # [unix]

test:
  commands:
    - minio --version

about:
  home: https://min.io
  license: AGPL-3.0-only
  license_family: AGPL
  license_file: LICENSE
  summary: High Performance Object Storage for AI
  description: |
    MinIO is a High Performance Object Storage released under GNU Affero General Public License v3.0.
    It is API compatible with Amazon S3 cloud storage service. Use MinIO to build high performance
    infrastructure for machine learning, analytics and application data workloads.
  doc_url: https://min.io/docs/minio
  dev_url: https://github.com/minio/minio

extra:
  recipe-maintainers:
    - kenodegard
