{% set name = "pulumi-sdks" %}
{% set version = "3.112.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/pulumi/pulumi/archive/refs/tags/v{{ version }}.tar.gz
  sha256: 4d29026ddb16056ac107835ad08f8744339cee8256d1fb25ff84aaa369291de9

build:
  number: 0
  skip: true  # [not linux]

outputs:
  - name: pulumi-core
    script: build_pulumi_core.sh
    requirements:
      build:
        - {{ compiler('go') }}
        - make
      run:
        - {{ pin_subpackage("pulumi-core") }}

  - name: pulumi-sdk-go
    script: build_pulumi_go.sh
    requirements:
      build:
        - {{ compiler('go') }}
        - make
      run:
        - {{ pin_subpackage("pulumi-core") }}

  - name: pulumi-sdk-python
    script: build_pulumi_python.sh
    requirements:
      build:
        - {{ compiler('go') }}
        - make
      run:
        - {{ pin_subpackage("pulumi-core") }}

  # - name: pulumi-sdk-nodejs
  #   script: build_pulumi_nodejs.sh
  #   requirements:
  #     build:
  #       - {{ compiler('go') }}
  #       - make
  #       - yarn
  #     run:
  #       - {{ pin_subpackage("pulumi-core") }}

about:
  home: https://www.pulumi.com/
  summary: Infrastructure as Code in any Programming Language
  description: |
    Pulumi is an infrastructure as code platform that allows you to use familiar
    programming languages and tools to build, deploy, and manage cloud infrastructure.
    Pulumi is free, open source, and optionally pairs with the Pulumi Cloud to
    make managing infrastructure secure, reliable, and hassle-free.
  license: Apache-2.0
  license_family: Apache
  license_file: LICENSE
  doc_url: https://www.pulumi.com/docs/
  dev_url: https://github.com/pulumi/pulumi

extra:
  recipe-maintainers:
    - zklaus
