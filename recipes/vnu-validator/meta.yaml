{% set version = "23.4.11" %}

package:
  name: vnu-validator
  version: {{ version }}

source:
  # building from source is... untenable due to sh/py/ant/java/git sandwich
  url: https://registry.npmjs.org/vnu-jar/-/vnu-jar-{{ version }}.tgz
  sha256: cbba595a86d680d48e9c5261a16d9ef409e5658ad8aa47081c593690a652cf0f

build:
  number: 0

requirements:
  run:
    - openjdk >=8

test:
  requires:
    - m2-grep  # [win]
  commands:
    - vnu --version
    - vnu --help
    - vnu --version | grep -iE "{{ version.replace(".", "\.") }}" || exit 1
    - echo "<html/>" > fail.html
    - vnu --stdout fail.html >> fail-results.txt || echo expected
    - grep -iE "Start tag seen without seeing a doctype first" fail-results.txt

about:
  home: https://validator.github.io/validator
  license: MIT
  # TODO: see if licenses are in jar (unlikely)
  license_file: LICENSE
  summary: Helps you catch problems in your HTML/CSS/SVG
  dev_url: https://github.com/validator/validator

extra:
  recipe-maintainers:
    - bollwyvl
